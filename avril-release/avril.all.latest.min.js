/*! avril-front - v0.0.2 - 2014-09-29 */!function(){function isLambda(a){return a&&"string"==typeof a&&a.indexOf("=>")>0}function arrayEx(a){function b(a){return"function"==typeof a}function c(a){return b(a)?a:isLambda(a)?a.lambda():function(){}}function d(a,b,c){return c=c||1,a.sort(function(a,d){return b?a[b]>d[b]?c:-1*c:a>d?c:-1*c})}var e={};e.asc=function(a){return d(this,a,1)},e.desc=function(a){return d(this,a,-1)},e.each=function(a){a=c(a);for(var b=0;b<this.length&&0!=a(this[b],b);b++);return this},e.where=function(a){a=c(a);var b=[];return this.each(function(c,d){1==a(c,d)&&b.push(c)}),b},e.first=function(a){return a=c(a),0==this.length?null:a?this.where(a)[0]:this[0]},e.last=function(a){return a=c(a),0==this.length?null:b(a)?this.where(a).last():this[this.length-1]},e.groupBy=function(a){if(a=c(a)){var b={};return this.each(function(c,d){var e=a(c,d)+"";b[e]||(b[e]=[]),b[e].push(c)}),b}return this},e.take=function(a){for(var b=[],c=0;a>c;c++)b.push(this[c]);return b},e.skip=function(a){for(var b=[],c=a;c<this.length;c++)b.push(this[c]);return b},e.select=function(a){a=c(a);var b=[];return this.each(function(c,d){b.push(a.call(c,c,d))}),b},e.remove=function(a){a=c(a);var b=[];this.each(function(c,d){a(c,d)&&b.push(d)});var d=this;return b.reverse().each(function(a){d.splice(a,1)}),d},e.removeElement=function(a){return this.remove(function(b){return b==a})},e.removeAt=function(a){return this.remove(function(b,c){return c==a})},e.indexOf=function(a){var b=-1;return this.each(function(c,d){return c==a?(b=d,!1):void 0}),b},e.contain=function(a,b){return 1!=b&&"function"==typeof a?this.where(a).length>0:this.indexOf(a)>=0};var b=function(a){return"function"==typeof a};e.distinc=function(a){var c=[];return this.each(function(d,e){b(a)&&0!=a(d,e)?c.push(d):b(a)||c.contain(d)||c.push(d)}),c},e.clone=function(){for(var a=[],b=0;b<this.length;b++)a.push(this[b]);return a};for(var f in e)a[f]=a[f]||e[f];return a}String.prototype.toUnicode=function(){return escape(this).replace(/\%/g,"\\")},String.prototype.endWidth=function(a,b){if(b){var c=this.toLower(),d=a.toLower();return-1!==c.indexOf(d,c.length-d.length)}return-1!==this.indexOf(a,this.length-a.length)},String.prototype.beginWidth=function(a,b){if(b){var c=this.toLower(),d=a.toLower();return 0==c.indexOf(d)}return 0==this.indexOf(a)},String.prototype.replaceAll=function(a,b){var c=new RegExp(a,"gi");return this.replace(c,b)},String.prototype.equals=function(a,b){return void 0==b&&(b=!0),void 0!=a&&null!=a?this==a||this.toLower()==a.toLower():this==a},String.prototype.trim=function(){var a=/(^\s*)|(\s*$)/g;return this.replace(a,"")},String.prototype.trimAll=function(){var a=/\s*/g;return this.replace(a,"")},String.prototype.uperChar0=function(){var a=this,b=a.charAt(0),c=b.toUpperCase();return a.replace(new RegExp("^"+b),c)},String.prototype.lowerChar0=function(){var a=this,b=a.charAt(0),c=b.toLowerCase();return a.replace(new RegExp("^"+b),c)},String.prototype.toLower=String.prototype.toLowerCase,String.prototype.toUpper=String.prototype.toUpperCase,String.prototype.ellipsis=function(a,b){var c=this.toString();if(c.length<=a)return c;b=b||3;for(var d=c.substr(0,a-b),e=0;b>e;e++)d+=".";return d},String.prototype.lambda=function(ctx){var str=this;if(isLambda(str)){var lambdaKey=str.indexOf("=>"),args=str.substring(0,lambdaKey),funcContent=str.substring(lambdaKey+2),funcStr="function";if(funcStr+=args.indexOf("(")<0?" ("+args+")":args,funcStr+=funcContent.indexOf("{")>=0&&funcContent.indexOf(";")>=0?funcContent:"{ return "+funcContent+"; }",ctx)with(ctx)return eval("("+funcStr+")");return eval("("+funcStr+")")}},arrayEx(Array.prototype),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e})}(),function(a){return a.avril&&avril.avril?avril:(function(){var b=(a.avril,{});b.avril="avril",b.$=jQuery;var c=function(a){("function"==typeof a||"object"==typeof a)&&(a.extend=function(d,e){if(d)if(e)"string"==typeof d&&(a[d]=e);else if("function"==typeof d||"object"==typeof d){for(var f in d)a[f]=d[f],c(a[f]);d.ready&&"function"==typeof d.ready&&b.ready(function(){d.ready.call(d)})}})};b.isValueType=function(a){return null==a||"number,boolean,string,undefined".split(",").indexOf(typeof a)>=0},b.isFunc=function(a){return"function"==typeof a},b.isObj=function(a){return"object"==typeof a},b.isArray=function(a){return a instanceof Array},b.isStr=function(a){return"string"==typeof a},b.helper={encode:function(a){return $("<div/>").html(a).text()},decode:function(a){return $("<div/>").text(a).html()},encodeReg:function(a){var b="~!@#$%^&*()/\\|[].".split("");return a.split("").select(function(a){return b.indexOf(a)>=0?"\\"+a:a}).join("")}},b.namespace=function(b,d){function e(a,b){if(a.indexOf(".")>0){var d=a.substring(0,a.indexOf("."));return b[d]||(b[d]=new Object,c(b[d])),e(a.substring(a.indexOf(".")+1),b[d])}return b[a]?void 0:(b[a]=new Object,c(b[a]),b[a])}if(b&&"string"==typeof b)return e(b,d||a);throw" typeof(spaceName) must be string!"},b.module=function(c,d,e){2==arguments.length&&(e=d,d=[]),"string"==typeof d&&(d=d.trimAll().split(","));var f=b.module.getModuleEvent,g=d.where(function(c){return!b.object(a).getVal(c)}),h=0,i=function(h){if(j(),h==g.length){b.namespace(c);var i=b.object(a).getVal(c),k=d.select(function(c){return b.object(a).getVal(c)});e.apply(i,k),f(c)([name])}},j=function(){var e=g.where(function(c){return!b.object(a).getVal(c)}),f=d.where(function(c){return!!b.object(a).getVal(c)});console.log(0==e.length?c+" dependences loaded complete.":c+" dependences loaded "+f.join(",")+", waiting: "+e.join(","))};g.length>0&&g.each(function(a){f(a)(function(){i(++h)})}),i(0)},b.module.getModuleEvent=function(a){return b.event.get("module.events."+a)},b.module.notify=function(a,c){b.module.getModuleEvent(a)([a,c])},b.module.subscribe=function(a,c){b.module.getModuleEvent(a)(c)},b.extend=function(a,d){var a=arguments[0],d=arguments[1];if(a)if(d){if("string"==typeof a)b[a]=d,c(b[a]);else if("object"==typeof a||"function"==typeof a)for(var e in d)a[e]=d[e]}else if("object"==typeof a||"function"==typeof a)for(var e in a)b[e]=a[e],c(b[e]);return b};var d={maxDeep:5,isValueType:function(a){return null==a||"number,boolean,string,undefined".split(",").indexOf(typeof a)>=0},getVal:function(a,b){if(b.indexOf(".")>0){var c=b.substring(0,b.indexOf(".")),d=b.substring(b.indexOf(".")+1);if(!(c.indexOf("[")>=0)){var e=a[c];return this.getVal(e,d)}var f=c.substring(c.indexOf("[")+1,c.lastIndexOf("]"));if(f=parseInt(f),0==c.indexOf("["))return this.getVal(a[f],d);if(c.indexOf("[")>0){var g=b.substring(0,b.indexOf("["));return 0==g.indexOf('"')&&(g=g.substring(1,g.length-2)),this.getVal(a[g][f],d)}}else{if(!(b.indexOf("[")>=0))return a[b];var f=b.substring(b.indexOf("[")+1,b.lastIndexOf("]"));if(f=parseInt(f),0==b.indexOf("["))return a[f];if(b.indexOf("[")>0){var g=b.substring(0,b.indexOf("["));return a[g][f]}}},setVal:function(a,b,c){if(b.indexOf(".")>0){var d=b.substring(0,b.indexOf(".")),e=b.substring(b.indexOf(".")+1);if(d.indexOf("[")>=0){var f=d.substring(d.indexOf("[")+1,d.indexOf("]"));if(f=parseInt(f),0==d.indexOf("["))a[f]||(a[f]={}),this.setVal(a[f],e,c);else if(d.indexOf("[")>0){var g=b.substring(0,b.indexOf("["));a[g]||(a[g]=[]),a[g][f]||(a[g][f]={}),this.setVal(a[g][f],e,c)}}else a[d]||(a[d]={}),this.setVal(a[d],e,c)}else{var h=/\[\d*\]/;if(h.test(b)){var f=b.substring(b.indexOf("[")+1,b.lastIndexOf("]"));if(f=parseInt(f),0==b.indexOf("["))a[f]=c;else if(b.indexOf("[")>0){var g=b.substring(0,b.indexOf("["));a[g]||(a[g]=[]),a[g][f]=c}}else a[b]=c}return a},beautifyNames:function(a,c,d){var e=this;if(b.isArray(a)){for(var f=[],g=0;g<a.length;g++){var h=a[g];(b.isObj(h)||b.isArray(h))&&(h=e.beautifyNames(h,c+1,d)),f.push(h)}return f}if(b.isObj(a)){var i={};return c=void 0==c||isNaN(c)?0:c,c>this.maxDeep?i:(void 0==d&&(d=!0),this.each(a,function(a,f){e.isValueType(f)?i[a]=f:b.isObj(f)?b.isStr(a)&&d?i[a.lowerChar0()]=b.object.beautifyNames(f,c+1,d):i[a]=b.object.beautifyNames(f,c+1,d):b.isStr(a)&&d?i[a.lowerChar0()]=f:i[a]=f}),i)}},deepClone:function(a,b){return this.beautifyNames(a,b,!1)},each:function(a,c){if(!b.isFunc(c))return!1;if(b.isArray(a)){for(var d=0;d<a.length;d++)if(0==c(d,a[d]))return!1}else for(var e in a)if(0==c(e,a[e]))return!1},keys:function(a){var b=[];return this.each(a,function(a){b.push(a)}),b},values:function(a){var b=[];return this.each(a,function(a,c){b.push(c)}),b},tryGetVal:function(a,b){var c=void 0;try{c=this.getVal(a,b)}catch(d){}return c},instanceOf:function(a,b){return a instanceof b},keyValues:function(a){var b=[];return this.each(a,function(a,c){b.push({key:a,value:c})}),b},toArray:function(a){if(!a)return[];if(a instanceof Array)return a;var b=[];if(a.length)for(var c=0;c<a.length;c++)b.push(a[c]);return b}};b.object=function(a){var c={getVal:function(c){return b.object.getVal(a,c)},setVal:function(c,d){return b.object.setVal(a,c,d)},each:function(c){b.object.each(a,c)},keys:function(){return b.object.keys(a)},values:function(){return b.object.values(a)},beautifyNames:function(){return b.object.beautifyNames(a)},deepClone:function(c){return b.object.deepClone(a,c)},tryGetVal:function(c){var d=void 0;try{d=b.object.getVal(a,c)}catch(e){}return d},instanceOf:function(c){return b.object.instanceOf(a,c)},keyValues:function(){return b.object.keyValues(a)},toArray:function(){return b.object.toArray(a)}};return c},$.extend(b.object,d);var e={};b.data=function(a,c){if("string"!=typeof a&&(a=b.getHash(a).toLowerCase()),1==arguments.length){try{var d=b.object.getVal(e,a);return d}catch(f){}return null}if(2==arguments.length)b.object.setVal(e,a,c);else if(0==arguments.length)return e},b.guid=function(){return Math.random().toString(32).replace(".","_")+(new Date).getTime().toString(32)},b.alert=function(a){alert(a)},b.confirm=function(a,b){b(void 0==a||""==a?!0:confirm(a))};var f=function(){var a=0;return function(c){if(null===c)return"null";if("string"==typeof c)return c;var d=typeof c;return"object"!==d?d:c.___hash___||(c.___hash___=b.guid()+"__"+a++)}}();b.getHash=f;var g=!1;b._single=function(){g||(b.getHash=top.avril?top.avril.getHash:f),g=!0},a.avril=b}(),function(b,c){function d(a,b){var b=b||g+"["+h+"].",c=b+a;return f._event[c]||f.register(c),f._event[c]}function e(a,b,e){var f=f||"before",g=g||"on",h=a,j=h[b],k=i(f,b),l=i(g,b);if("function"!=typeof h[b]||"function"==typeof h[b][k]||"function"==typeof h[b][l])return h;var m=d(k,e),n=d(l,e);h[b]=function(){var a=this;if(m(a,arguments)){var b=j.apply(a,arguments),c=[];c.push(b);for(var d=0;d<arguments.length;d++)c.push(arguments[d]);return n(a,c),b}return!1},h[b]._orgFunc=j,h[b][k]=m,h[b][l]=n;for(var o in j)h[b][o]=c.isFunc(j[o])?j[o].bind(j):j[o];return h}if(c.event)return!0;var f=c.event={},g=c.guid(),h=0,i=function(){var a=[];if(!arguments.length)return"";for(var b=0;b<arguments.length;b++)a.push(arguments[b]);a[0]&&(a[0]=a[0].lowerChar0());for(var b=1;b<arguments.length;b++)a[b]=a[b].uperChar0();return a.join("")};f._event={eventList:{},add:function(a,b,c,d){b=b||"default",this.eventList[b]||(this.eventList[b]=[]);var e={func:a,data:c,ctx:d};this.eventList[b].push(e)},execute:function(a,b,d){var e=this;a=a||"default",this.eventList[a]=this.eventList[a]||[],b=b||c.event._event;var f=!0,g=[];return this.eventList[a].each(function(a){var c,e=a.ctx||b;if(d&&d.length>=0){for(var h=[],i=0;i<d.length;i++)h.push(d[i]);a.data&&h.push(a.data),f=f&&!(0==(c=a.func.apply(e,h)))}else f=f&&!(0==(c=a.func.call(e,d,a.data)));"removeThis"===c&&g.push(a)}),g.each(function(b){e.eventList[a].removeElement(b)}),f},clear:function(a){this.eventList[a]=[]}},f.events=f._event.eventList,f.query=function(a){var b={};if("string"==typeof a)for(var d in f.events)0===d.indexOf(a)&&(b[d]=f.events[d]);else"function"==typeof a&&(b=a(b.events));return{events:b,exec:function(a){for(var d in b)c.event._event.execute(d,null,a)}}},f.register=function(a,b){if(f._event[a])return f._event[a];var d=function(d,e,f){return"function"!=typeof d?(e=e||d,b=b||e,c.event._event.execute(a,b,e)):void c.event._event.add(d,a,e,f||b)};return d.remove=function(a){return this.eventList().remove(a)},d.clear=function(){f._event.clear(a)},d.eventList=function(){return f._event.eventList[a]},d.execList=function(){},f._event[a]=d,d},f.registerOn=function(a,b,d){var e=c.getHash(a)+"_"+b;return this.register(e,d)},f.remove=function(a){f._event[a]&&delete f._event[a]},f.clear=function(a){f._event.clear(a)},f.hook=function(a,b,d){d=d||c.getHash(a),b.split(",").each(function(b){b&&e(a,b,d)})},f.unhook=function(a,b){a[b]&&a[b]._orgFunc&&(a[b]=a[b]._orgFunc)},f.get=function(b,c){if(c||(c=a),c.jquery)return c.each(function(){f.registerOn(this,b,this,this)}),function(){var a=arguments,d=!0;return c.each(function(){d=d&&f.registerOn(this,b,this,this).apply(this,a)}),d};var d=this.registerOn(c,b,c,c);return d}}(avril.$,avril),function(b){if(b.createlib)return b.createlib;var c={uperChar0:function(a){var b=a.charAt(0),c=b.toUpperCase();return a.replace(new RegExp("^"+b),c)},lowerChar0:function(a){var b=a.charAt(0),c=b.toLowerCase();return a.replace(new RegExp("^"+b),c)}},d=0,e=function(){var a=[];if(!arguments.length)return"";for(var b=0;b<arguments.length;b++)a.push(arguments[b]);a[0]&&(a[0]=c.lowerChar0(a[0]));for(var b=1;b<arguments.length;b++)a[b]=c.uperChar0(a[b]);return a.join("")},f={},g=function(c,g,h,i,j){if(j=j||a,b.object(j).tryGetVal(c))return b.object(j).tryGetVal(c);b.object(j).setVal(c,function(a){function h(a,b,c){var d=b[a],e=c[a];if(d!=e){var f=s([a,b,c]);f&&(c[a]=b[a],r([a,b,c]))}}function k(a,f){b.event.hook(a,f,c+"["+d+"].");var g=g||"before",h=h||"on",i=e(g,f),j=e(h,f);return a.events[i]=a[f][i],a.events[j]=a[f][j],a}function l(a,b){if(!a)return!1;var c=b.events;for(var d in a)c[d]&&"function"==typeof a[d]&&(1==a.clearAllEvents&&c[d].clear(),c[d](a[d]))}d++;var m=b.object(j).getVal(c);if(!(this instanceof m))return new m(a);var n=this;if(i){b.isStr(i)&&(i=b.object(j).getVal(i));var o=i(a);b.object(o).each(function(a,b){n[a]=b}),n._getSuper=function(){return o}}else{n._getSuper=function(){return null},n.events={};var p=b.guid(),q=f[p]={},r=b.event.register(c+"["+d+"].onPropertyChange"),s=b.event.register(c+"["+d+"].beforePropertyChange");l(a,n),n.options=function(a,b){if(arguments.length>0){if("object"==typeof a)for(var c in a)h(c,a,q);else if("string"==typeof a){var c=a,a={};a[c]=b,h(c,a,q)}return l(a,this),this}return q},n.events.beforeOptionChange=s,n.events.onOptionChange=r,n.hook=function(a){var b=this;return"string"==typeof a&&(a.indexOf(",")>=0?a.split(",").each(function(a){k(b,a)}):k(b,a)),b},n._prop=function(a,c,d){b.createlib.getset(n,a,c,d)},n._parseConfig=function(a){b.createlib.parseConfig(n,a)}}"function"==typeof g&&(g.call(this,a),l(a,this))});var k=b.object(j).getVal(c);$.extend(k,h);var l=k.toString;k.toString=function(a){return a?l.call(k):"type [ "+c+" ] "},k.toJQ=function(a,b){var c=a;a+="API",$.fn[c]=function(c){{var d=arguments;this.each(function(){var d=$(this);if(d.data(a))var e=d.data(a);else{var f={};"function"==typeof b?b.call(d,f):"string"==typeof b&&(f[b]=d);var e=new k($.extend({},c,f));d.data(a,e),"function"==typeof e.init&&e.init()}})}if(0!=this.length&&this.data(a)){var e=this.data(a);if(1==d.length){if("string"==typeof d[0])return e[d[0]]}else if(d.length>1&&"string"==typeof d[0]&&e[d[0]]){if("function"==typeof e[d[0]]){for(var f=[],g=1;g<d.length;g++)f.push(d[g]);return e[d[0]].apply(e,f)}e[d[0]]}}return this}};var m=c.replace(new RegExp("\\.","gi"),"_");return $.fn[m]||($.fn[m]=function(a){return this.each(function(){var b=$(this),d=$.extend({$:b},a),e=k(d);b.data(c,e)}),this}),k},h=function(a,c,d,e,f){var g=b.createlib(c,d,e,a,f);return g};b.createlib=g,b.createlib.getset=function(a,c,d,e){a[c]=function(a,c,d,e){var f={value:void 0};return function(){return 0==arguments.length?b.isFunc(d)?d.call(f,f.value):f.value:(b.isFunc(e)?e.call(f,arguments[0]):f.value=arguments[0],a)}}(a,c,d,e)},b.createlib.parseConfig=function(a,c){b.object(a.options()).each(function(d){if(0==d.indexOf("$")&&!a[d]){var e,f=b.guid();b.createlib.getset(a,d,function(){return f!=a.options()[d]&&(f=a.options()[d],e=(c||$)(a.options()[d])),e},function(b){a.options(d,b)})}})},b.createlibOn=function(a,c,d,e,f){return b.createlib(c,d,e,f,a)},b.extendlib=h,b.createlib.beautifyFunName=e,function(){b.object.instanceOf;b.object.instanceOf=function(a,c){var d=a instanceof c;if(d)return!0;if(b.isFunc(a._getSuper)){var e=a._getSuper();if(d=e instanceof c)return!0;if(null!=e)return b.object(e).instanceOf(c)}return d}}()}(avril),avril.execTime=function(a,b){var c=(new Date).getTime();a&&a();var d=(new Date).getTime()-c;return avril.execTime.funcTimes.push(d),b&&(avril.execTime.funcTimeMap[b]=d),d},avril.execTime.funcTimes=[],avril.execTime.funcTimeMap={},a.console||(a.console={},a.console.log=function(){}),void"log,warn,error".split(",").each(function(a){avril[a]=function(b){console[a]&&console[a](b)}}))}(this),function($,avril){avril.namespace("avril.tools"),function(a){return a.request?!1:void(a.request=function(){function b(b){var c={};c.queryString=function(){if(b.indexOf("?")<0)return{};for(var a,c={},d=function(a){return decodeURIComponent(a.replace(/\+/g," "))},e=b.substring(b.indexOf("?")+1),f=/([^&=]+)=?([^&]*)/g;a=f.exec(e);)c[d(a[1])]=d(a[2]);return c}();var d=function(b,d){var e=!1;return a.object(c.queryString).each(function(a){b.toLower()==a.toLower()&&(e=!0,c.queryString[a]=d)}),e||(c.queryString[b]=d),c},e=function(b){var d;return a.object(c.queryString).each(function(a,c){b.toLower()==a.toLower()&&(d=c)}),d};return c.param=function(a,b){if(0==arguments.length)return this;if(1==arguments.length){if("string"==typeof a)return e(a);if("object"==typeof a)for(var c in a)d(c,a[c]);return this}return 2==arguments.length?d(a,b):void 0},c.getUrl=function(){var a=b.split("?")[0];a.indexOf("?")<0&&(a+="?");for(var d in c.queryString)null!=c.queryString[d]&&(a+=d+"="+encodeURI(c.queryString[d])+"&");return a.lastIndexOf("&")==a.length-1?a.substring(0,a.lastIndexOf("&")):a.lastIndexOf("?")==a.length-1?a.substring(0,a.lastIndexOf("?")):a},c.toString=function(){return this.getUrl()},c}return $.extend(b,b(window.location.href)),b}())}(avril),avril.namespace("avril.tools.loader"),avril.tools.loader.extend({jsonp:function(options){function removeScript(){function a(){try{(head?head[0]:document).removeChild(script)}catch(a){}try{delete window[jsonpcallback]}catch(a){}}"undefined"==typeof script.jsonp&&options.error(),setTimeout(function(){a()},5e3)}options.success=options.success||function(){},options.error=options.error||function(){};var jsonpcallback="avril_"+avril.guid();window[jsonpcallback]=function(){if(script.jsonp=!0,options.success){var obj=arguments[0];"string"==typeof obj&&(obj=eval("("+obj+")")),options.success(obj)}};var script=document.createElement("script");script.type="text/javascript",script.language="javascript",script.charset="utf-8",script.async=!0;var head=document.getElementsByTagName("head");head[0].appendChild(script),script.onload=script.onreadystatechange=function(){(-[1]||/loaded|complete/i.test(this.readyState))&&removeScript()},script.onerror=function(){removeScript()};var request=avril.request(options.url);options.data&&avril.object(options.data).each(function(a,b){"function"!=typeof b&&"object"!=typeof b&&request.param(a,encodeURIComponent(b))}),request.param(options.jsonp||"jsonpcallback",jsonpcallback),script.src=request.getUrl()},json:function(a){a.url&&0==a.url.indexOf("http")&&a.url.indexOf("http://"+document.location.host)<0&&a.url.indexOf("https://"+document.location.host)<0?this.jsonp(a):$.ajax(a)},loadScript:function(a,b){callbackCache.hasOwnProperty(a)?b():(loadingList.push(a),callbackCache[a]=b||function(){},1==loadingList.length&&this._loadScript())},loadStyle:function(a){var b=document.getElementsByTagName("head")||document.getElementById("body"),c=document.createElement("link");c.rel="Stylesheet",c.type="text/css",(b?b[0]:document).appendChild(c),c.href=a},template:function(a,b){var c=avril.tools.cache(a);c?b(cache):$.get(a,function(c){b(c),avril.tools.cache(a,c)})}}),avril.tools.cache=function(){var a=window.localStorage||{},b=function(b,c){switch(arguments.length){case 0:return a;case 1:return a[b];case 2:return a[b]=c}};return b.del=function(b){delete a[b]},b.delByPre=function(c){for(var d in a)0==d.indexOf(c)&&b.del(d)},b.list=function(a,c){function d(c){return c.save=function(){b.list(a,c)},c}switch(arguments.length){case 1:var e=[];if(b(a)){var c=$.parseJSON(b(a)).data;return d(c),c}return d(e);case 2:if(c instanceof Array)return b(a,$.toJSON({data:c})),d(c);var e=[c];return b(a,$.toJSON({data:e})),d(e)}},b.object=function(a,c){function d(c){return c=c||{},c.save=function(){return b.object(a,c),c},c}switch(arguments.length){case 1:return c=b(a),c?d($.parseJSON(c).data):d();case 2:return b(a,$.toJSON({data:c})),d(c)}},b.localStorage=!!window.localStorage,b}(),avril.tools.queue=function(){function a(a){this.name=a;var b=[],c=function(){var a=b[0];if(a){var d=a.fn;a.status||(a.status="doing",d(function(){a.status="done",b.shift(),c()}))}};this.func=function(a){b.push({fn:d(a)}),c()};var d=function(a){return a.length>0?a:function(b){a(),b()}}}var b={};return function(c){return c=c||(new Date).getTime(),b[c]||(b[c]=new a(c))}}()}($,avril),function(a){return a.validator?(avril.namespace("avril.validator"),function(){var b=a.validator.prototype.showLabel;a.validator.prototype.showLabel=function(a){var c=b.apply(this,arguments);return this.errorsFor(a).addClass("help-block"),c}}(),avril.validator.extend({parseForm:function(b){var c=this;return b=a(b),b.each(function(){a.data(this,"validator",null),a(this).validate(c.getValidObj(a(this)))}),this},getValidObj:function(b,c){var d=c,e=d&&d.errCls||"has-error",f=d&&d.errCls||"has-success";d||(d={rules:{},errorElement:"small",messages:{},success:function(b){a(b).parent().removeClass(e).addClass(f),b.remove(),b.addClass("help-block")},errorPlacement:function(b,c){a(c).after(b),b.addClass("help-block"),b.hide(),a(c).parent().removeClass(f).addClass(e)}});var g=this;return b.find("input,select,textarea").each(function(){g.parseInput(a(this),d)}),d},parseInput:function(a,b){var c=this,d=a.attr("name"),e=a[0],f=e.attributes,g=[],h="data-val-";if(d||a.attr("name",d="input-name-"+avril.getHash(a)),"true"===a.attr("data-val")&&a.is(":enabled")){b.rules[d]||(b.rules[d]={}),b.messages[d]||(b.messages[d]={});for(var i=0;i<f.length;i++)g.push(f[i]);{g.each(function(e){var f=e.name;if(e.name.indexOf(h)>=0){var i=c._getOrgAttrName(f.replace(h,""));if(i.indexOf("-")<0){var j=a.attr("data-val-msg-"+i)||a.attr(f);b.messages[d][i]=j,c._getRuleParam(a,f,i,g,b),b.rules[d][i]||(b.rules[d][i]=!0)}}})}}},_getOrgAttrName:function(a){var b={equalto:"equalTo",dateiso:"dateISO"};return b[a]||a},_getRuleParam:function(a,b,c,d,e){var f=a.attr("name"),g=this;d.each(function(d){0==d.name.indexOf(b)&&(e.rules[f][c]=g._paramAdapter[c]?g._paramAdapter[c](a.attr(d.name),a):a.attr(d.name))})},_paramAdapter:{required:function(){return!0},range:function(a){return a.split(",").select(function(){return Number(this)})},rangelength:function(a){return a.split(",").select(function(){return Number(this)})}}}),void a.each(["minlength","maxlength","min","max"],function(){avril.validator._paramAdapter[this]=function(){return Number(arguments[0])}})):!1}(jQuery),function(a,b,c){var d=avril.createlib("avril.Mvvm",function(b){var c=a.extend(this.options(),b,{guid:avril.guid()}),e=this,f=function(a){return a?(a instanceof jQuery&&(a=a[0]),"hs_"+avril.getHash(a)):a+""},g=function(){return f({})},h={},i=function(){var a={};return function(b){return function(c,d){return c=f(c),1==arguments.length?a[b+"_"+c]:2==arguments.length?a[b+"_"+c]=d:void 0}}}(),j=i("expression_cache"),k=i("expression_cache"),l=i("inited_element_cache"),m=i("html_template_cache"),n=[],o={global:{},binders:{}},p=function(a){var b=k(a);if(b)return b;var c=a.attr(w("each-item-group-id"));return c&&(b=k("group_"+c))?b:(b={},e.selector.split(",").each(function(c){if(a.is(c)){var e=c.replace(/\[|\]/g,"").replace(d.defaults.attr_pre+"-","");b[e]=h[e]}}),k("group_"+c,b),b)},q={$root:{},$controllers:{}},r=/^(true|false|null|undefined)$/,s=/(\$data|\$scope|\$root)(\[\".+?\"\]|\[\'.+?\'\]|\[\d+\]|\.(\w+\d*)+)+/g,t=function(){return/^((\[(\d+|\".+?\"|\'.+?\')\]|\w+\d*|\$)+(\.\w+\d*)*)+$/g},u=function(a,b){if(b=b||"",0==b.indexOf("$root"))return b;if(b=b.replace("$scope.",""),t().test(b)||(b=""),b===M("indexChange")&&(a=a.replace(/\[\d+\]$/,"")),b.indexOf("$parent")<0)return a+"."+b;for(var c=a.split(".");0==b.indexOf("$parent");)c.pop(),b=b.replace("$parent.","");var d=c.join(".");return d+(/\]$/.test(d)?"":".")+b},v=function(){var a={};return function(b,c){if(b=b.replace(/^\s+|\s+$/g,""),a[b])return c?a[b].each(c):a[b];var d,e=[],f=/\$index\(\s*\)/g;for(f.test(b)&&e.push(d=M("indexChange"));d=s.exec(b);)e.push(d[0]),c&&c(d[0]);return a[b]=e}}(),w=d.bindingName.bind(d),x=function(a){return w(a)+"-data"},y=function(b,c,d){var e=avril.object(q).tryGetVal(b),f={};if(e&&avril.isObj(e))if(avril.isArray(e))e.each(function(a,b){f[b]=a}),f.length=e.length;else for(var g in e)f[g]=e[g];return a.extend(!0,f,o.global),d&&a.extend(!0,f,o.binders[d]),f.$root=q.$root,f.$ns=b,f.$el=c,f.$scope=e,f},z=function(b){return b=a(b),y(U(b),b)},A=function(a,b){var c=a=a.trim();return r.test(a)?a:isNaN(a)?j(c)?j(c):(b&&h[b]&&h[b].expressionParser&&(a=h[b].expressionParser(a)),b&&n.binders&&n.binders[b]&&n.binders[b].each(function(b){a=b(a)}),n.each(function(b){a=b(a)}),j(c,a),a):a},B=function(a,b,c){a=A(a,c);var e=U(b),f=y(e,b,c);return d.executeExpression(a,f)},C=function(a,b,c){return function(){return B(b,a,c)}},D=function(){return avril.object(h).keys().select(function(a){return"["+d.defaults.attr_pre+"-"+a+"]"}).join(",")},E=function(a){return"["+w(a)+"]"},F=function(b,c){var e=a(b);if(!d.elementExists(e))return!0;var f="["+w("stop")+"]";return e.is(f)||e.parents(f).length?!0:l(e)&&!c?!0:(l(e,!0),void("false"===e.attr(w("delay"))?G(e):Q(function(){d.elementExists(e)&&G(e)})))},G=function(){var a={},b=function(b){return a[f(b)]},c=function(b,c){a[b]=c},d=function(a,b,c){L(a).remove(function(a){return a&&a.data&&a.data.$el&&a.data.ns?a.data.$el.is(b)&&a.data.ns==c:!1})};return function(a){var e=p(a),f=U(a);for(var g in e){var h=a.attr(w(g)),i=H(h,a,g,f,b(a),d);e[g].init(a,C(a,h,g),{expression:h,ns:f,dependencies:i})}c(a,f)}}(),H=function(b,c,f,g,h,i){var j=A(b),k=0,l=function(b,h){e.subscribe(b,function(b,e,g){return d.elementExists(c)?void((h||b!=e)&&I(c,a.extend(g,{dependencies:h,oldValue:e,newValue:b}),f)):(c.is(x("each-item")),"removeThis")},{binder:f,$el:c,ns:g}),d.devInfo(c,"watch-"+f+"-"+k++,b)};l(g);var m=v(j,function(a){if(a){var b=u("scope"!==f?g:U(c.parent()),a);l(b,a),h&&i(u(h,a),c,h)}});return m},I=function(b,c,d){var e=a(b),f=p(e),g=e.attr(w(d));f[d].update(e,C(e,g,d),a.extend(!0,{},c,{expression:g,binder:d,ns:U(e)}))},J="ave_"+c.guid,K=function(){var a=[];for(var b in avril.event.events)0===b.indexOf(J)&&a.push(b.replace(J+"_",""));return a},L=function(a){return avril.event.get(a,J)},M=function(a){return"__$$__"+c.guid+"__$$__"+a},N=function(a,b){return a+"."+M(b)},O=function(a,b){return L(N(a,b))},P=function(a,b){var c=w(b)+"-css";a.addClass(c)},Q=function(a){setTimeout(a,1)},R=function(){var b=!1;return function(){if(b)return!0;b=!0;var c=d.defaults.attr_pre,e=avril.mvvm;a(document).on(d.defaults.trigger_events,e.selector,function(){var b=a(this);if(b.is(e.selector)&&b.is("input,textarea,select")){var c=e.getAbsNs(b);e.setVal(c,b.val(),b)}}),a("html").attr(c+"-scope","$root").addClass("av-mvvm")}}();this.selector=D(),this.addBinder=function(a,b,c){"function"==typeof b&&(b={init:b,update:b}),b.update||(b.update=function(){}),b.init||(b.init=function(){}),c=c||b.expressionParser,avril.isFunc(c)&&(c=c.bind(b)),h[a]={init:b.init.bind(b),update:b.update.bind(b),expressionParser:c},this.selector=D()},this.addExpressionParser=function(a,b){b?(n.binders=n.binders||{},n.binders[b]=n.binders[b]||[],n.binders[b].push(a)):n.push(a)},this.addMagic=function(a,b,c){if(!a||0!=a.indexOf("$"))throw"Magic method's name should start with '$'";c?(o.binders[c]||(o.binders[c]={}),o.binders[c][a]=b):o.global[a]=b};var S=function(a){!a.is("html")&&F(a),a.find(e.selector).each(function(){F(this)})}.bind(this);this.bindDom=function(b,c){R();var d=a(b&&b!==document?b:"html");return c===!0?Q(function(){S(d)}):c===!1?S(d):void("false"===d.attr(w("delay"))?S(d):Q(function(){S(d)}))},this.setVal=function(a,b,c,d){var e=avril.object(q).tryGetVal(a);e!=b&&(b&&("string"!=typeof b||isNaN(b)||(b=Number(b))),avril.object(q.$root).setVal(a.replace(/^\$root\.?/,""),b),!d&&L(a)([b,e,{sourceElement:c,channel:a}]))},this.array=function(a,b){var c=this.getVal(a);c instanceof Array||(c=[],this.setVal(a,c,b));var d=function(c,d){L(a+".length")([c,d,{sourceElement:b,channel:a}])},e=function(){h.indexChange([])},f={add:function(b){c.push(b),O(a,"add")([b,{guid:g()}]),d(c.length,c.length-1)},remove:function(a){this.removeAt(c.indexOf(a))},removeAt:function(b){var f=c[b];c.removeAt(b),O(a,"remove")([f,b,{guid:g()}]),d(c.length,c.length-1),e()},concat:function(b){for(var e=0;e++;e<b.length)c.push(b[e]);O(a,"concat")([b,{guid:g()}]),d(c.length,c.length-b.length)}},h=function(){var c={},d=function(d){c[d]=function(){"function"==typeof arguments[0]?O(a,d)(arguments[0],{$el:b,ns:a}):O(a,d)(arguments[0])}};d("indexChange");for(var e in f)d(e);return c}();return f.events=h,f},this.getVal=function(a){return avril.object(q).tryGetVal(a)},this.subscribe=function(a,b,c){var d=a.split(",");d.each(function(f){var g={subscribes:d,subscribeStr:a,current:f,values:function(a){var b=this.subscribes.select(function(a){return e.getVal(a)});return a&&a.apply(this,b),b}};L(f)(b,c,g)})};var T=function(b){b=a(b);var c="each-scope",d=x(c),e=b.attr(w("each"));return e&&t().test(e)?e.replace(/^\$scope(\.)?/,""):b.data(d)};this.getNs=function(b){var c="",e=w("scope"),f=x("scope"),g=b.parents("["+e+"],["+w("each")+"]"),h=T(b),i=function(a){return 0===a.indexOf("[")};return b.attr(e)&&(c=b.data(f)||b.attr(e)),h&&(c=h),0==c.indexOf("$root.")?c:(g.each(function(){var b,d=a(this),g=T(d);return d.attr(e)&&(b=d.data(f)||d.attr(e)),g&&(b=g),b&&(c=b+(!i(c)&&c?".":"")+c),c.indexOf("$root")>=0?!1:void 0}),c=c.replace(/\.$/g,""),d.devInfo(b,"scope",c),b.data(w("ns"),c),c)},this.getElScope=z;var U=this.getNs.bind(this);this.getAbsNs=function(a,b){var c=this.getNs(a),d=a.attr(w(b||"bind"));return u(c,d)},this.getRootScope=function(){return a.extend(!0,{},q.$root)};var V=this.addBinder.bind(this),W=this.addExpressionParser.bind(this),X=this.addMagic.bind(this);V("scope",function(a,b,c){var d=c.expression;if(!t().test(d)){d=A(d);var e=B(d,a.parent());if("string"!=typeof e)throw new Error("invalid scope value.",a.selector+":"+a[0].outerHTML);var f=v(d),g=x("scope");if((f&&f.length||!a.data(g))&&e!==a.data(g))return a.data(g,e),U(a,!0),F(a,!0),!1}}),V("if",{init:function(a,b){b=b();var c=a.html();m(a,c),b||a.html("")},update:function(a,b){var c=m(a);b()?(a.html(c),e.bindDom(a)):a.html("")}}),V("visibleIf",{init:function(a,b){P(a,"visible-if"),h["if"].init(a,b),h.visible.init(a,b)},update:function(a,b){h["if"].update(a,b),h.visible.update(a,b)}}),V("bind",function(a,b,c){if(c.sourceElement&&a.is(c.sourceElement)&&a.is("input,select,textarea"))return!1;var d=b();a.is("input")?a.is(":checkbox")||a.is(":radio")?a.attr("checked",a.val()===d):a.val(d):a.is("textarea")||a.is("select")?a.val(d):a.attr(w("text"))||a.attr(w("html"))||a.text(d)}),V("each",{init:function(a,b,c){m(a)||(this.getTemplateSource(a).attr(w("stop"),"true"),m(a,a.html()),a.html(""));var d=t().test(c.expression);if(!d){var e="$root.av_"+g(),f=T(a);if(!f)return a.data(x("each-scope"),e),F(a,!0),!1
}this.renderItems(a,b),d&&this.subscribeArrayEvent(a,c)},update:function(a,b,c){return c.sourceElement&&a.is(c.sourceElement)?!1:(a.html(m(a)),void this.renderItems(a,b))},subscribeArrayEvent:function(a){var b=this,c=U(a),d=e.array(c,a).events;d.add(function(){b.addItem(a,e.getVal(c))}),d.remove(function(c,d,e){b.removeItem(a,c,d,e)}),d.concat(function(){}),d.indexChange(function(){})},renderItems:function(a,b){var c=b();c&&c instanceof Array||(c=[]),e.setVal(U(a),c,a),a.html(m(a)),a.data(w(this.itemTemplateDataName),null);var d=this,f="guid_"+avril.guid(),g="<i>"+f+"</i>",h=this.getStart(this.getTemplateSource(a)),i=d.generateItem(a).attr(w("scope"),"[{scope}]").toArray().select(function(a){return a.outerHTML}).join(""),j=c.select(function(a,b){return i.replace(/\[\{scope\}\]/g,"["+b+"]")}).join("");h.after(g);var k=a[0].innerHTML;a[0].innerHTML=k.replace(g,j),e.bindDom(a,"false"!==a.attr(w("delay")))},getStart:function(a){return 1==a.length?a:a.last()},eachItemAttrName:w("each-item"),itemTemplateDataName:"av-each-item-template",getOrgSourceEl:function(a){var b=this.eachItemAttrName,c=a.children("["+b+"=true]");return 0==c.length&&(c=a.children().attr(b,"true")),c},getTemplateSource:function(b){function c(){a(this).attr(w("each-item-group-id"),f(this))}if(b.data(w(this.itemTemplateDataName)))return b.data(w(this.itemTemplateDataName));var d=(this.eachItemAttrName,this.getOrgSourceEl(b));return d.find(e.selector).each(c),c.call(d[0]),d.filter(e.selector).each(c),b.data(w(this.itemTemplateDataName),d),d.hide()},getLastEl:function(a){var b=this.eachItemAttrName,c=a.find("["+b+'="generated"]');return 0==c.length?this.getOrgSourceEl(a):1==c.length?c:c.last()},getItemByDataIndex:function(a,b){return a.children("["+this.eachItemAttrName+'="generated"][av-scope="['+b+']"]')},addItem:function(a,b){var c=this.getLastEl(a),d=this.generateItem(a);d.attr(w("scope"),"["+(b.length-1)+"]"),c.after(d),e.bindDom(d)},removeItem:function(b,c,d,e){var f=this.getItemByDataIndex(b,d),g=f.nextAll("["+this.eachItemAttrName+'="generated"][av-scope!="['+d+']"]'),h=U(b),i=function(){var a=K();a.each(function(a){if(0===a.indexOf(h)){var b=a.replace(h,""),c=/^\[(\d+)\]/.exec(b),e=c&&c[1];if(c&&void 0!==e&&(e=parseInt(e),e>=d)){var f=b.replace("["+e+"]","["+(e+1)+"]"),g=J+"_"+h+f,i=J+"_"+a,j=avril.event.events[g];j?avril.event.events[i]=j:delete avril.event.events[i]}}})},j=function(){g.each(function(){var b=a(this),c=/\[(\d+)\]/.exec(b.attr(w("scope")))[1]-1;b.attr(w("scope"),"["+c+"]")})};f.remove(),!e._eventAdjusted&&i(),e._eventAdjusted=!0,j()},generateItem:function(a){return this.getTemplateSource(a).clone().removeAttr(w("stop")).attr(this.eachItemAttrName,"generated").show()}}),V("text",function(a,b){a.text(b())}),V("html",function(a,b){a.html(b())}),V("visible",function(a,b){P(a,"visible"),b()?a.show():a.hide()}),V("template",{init:function(){this.render.apply(this,arguments)},update:function(){this.render.apply(this,arguments)},render:function(a){var b=this.getTemplateUrl.apply(this,arguments);this.getTemplate(b,function(b){a.html(b),e.bindDom(a)})},isUrl:function(a){return this.urlReg.test("http://test.com"+(0===a.indexOf("/")?"":"/")+a)||urlReg.test(a)},getTemplateUrl:function(a,b,c){return b()||c.expression},getTemplate:function(b,c){var d=this;if(0===b.indexOf("#"))return c(a(b).html());if(this.isUrl(b)){if(this.cache[b])return c(this.cache[b]);a.ajax({url:b,success:function(a){d.cache[b]=a,c(d.cache[b])}})}},cache:{},urlReg:new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$","i")}),V("attr",function(a,b){b=b(),a.attr(b||{})}),V("style",function(a,b){a.css(b()||{})}),V("css",function(a,b){b=b()||{};for(var c in b)a[b[c]?"addClass":"removeClass"](c)}),V("func",function(a,b){var c=b();avril.isFunc(c)&&c(a)},function(a){return a+".bind(this)"}),V("event",{init:function(a,b){var c=b();if(c)for(var d in c)a.on(d,c[d])}}),W(function(a){var b=/\$(tryGet)\((.+?)\)/g;return b.test(a)&&(a=a.replace(b,function(a,b,c){return c.indexOf('"')>=0||c.indexOf("'")>=0?a:"$"+b+'("'+c+'")'})),a}),X("$tryGet",function(a){var b=this;return avril.object(b).tryGetVal(a)||avril.object(b.$root).tryGetVal(a)||""}),W(function(a){if(t().test(a)&&!/^\d+/.test(a)){if(0==a.indexOf("$root"))return a;a.indexOf("$scope")<0&&(a="$scope."+a)}return a}),X("$guid",function(){return"av_guid"+avril.guid().replace(/_/g,"")}),X("$randomScope",function(){return"$root.rdm"+avril.guid().replace(/_/g,"")}),X("$parent",function(a){var b=a?this.$el.parents(a).first():this.$el.parents(E("scope")).first();return z(b)}),X("$setVal",function(a,b){return e.setVal(u(this.$ns,a),b),b}),X("$avArray",function(a){return 0===arguments.length&&(a=this.$ns),e.array(a,this.$el)}),X("$index",function(){for(var a=this.$el;!a.is("["+w("each-item")+"]")&&a.length&&!a.is("body");)a=a.parent();if(a.length){var b=a.attr(w("scope")),c=a.parent().children("["+w("scope")+'="'+b+'"]'),d=a.parent().children("["+w("each-item")+'="generated"]');if(1==c.length)return d.index(a);if(c.length>1)return d.index(c.first())/c.length}return 0}),X("$clone",function(b){return a.extend(!0,{},b)}),this.getRootScope=function(){return a.extend(!0,{},q.$root)}});d.defaults={attr_pre:"av",show_error:!1,trigger_events:"change keyup",show_dev_info:!1,use_text_expression:!1},d.bindingName=function(a){return this.defaults.attr_pre+"-"+a},d.devInfo=function(a,b,c){this.defaults.show_dev_info&&a.attr(this.bindingName(b)+"-dev",c)},d.elementExists=function(a){return a.parents("html").length>0||a.is("html")},d.executeExpression=function(a,b){return c(a).call(b)},avril.mvvm=avril.Mvvm()}(jQuery,function(expression){with(this)try{return eval("("+expression+")")}catch(E){if(avril.Mvvm.defaults.show_error===!0)throw E;avril.Mvvm.defaults.errorHandler&&avril.Mvvm.defaults.errorHandler(E)}return""},function(){var a={};return function(b){if(a[b])return a[b];try{return a[b]=new Function("with (this){\n                    try{\n                        return "+b+";\n                    } catch (E){\n                        if(avril.Mvvm.defaults.show_error === true){\n                            throw E;\n                        }\n                        if(avril.Mvvm.defaults.errorHandler){\n                            avril.Mvvm.defaults.errorHandler(E);\n                        }\n                        return '';\n                    \n}                \n}")}catch(c){return a[b]=function(){}}}}());